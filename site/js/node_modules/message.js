const ClientMessage = {
	INITIAL : "initial",

    MESSAGE : "message",

    PING : "ping",
    
    SEND_INVITE : "send_invite",
    ACCEPT_INVITE : "accept_invite",
    DECLINE_INVITE : "decline_invite",
    CONFIRMATION : "confirmation"
};

const ServerMessage = {
    MESSAGE : "message",

    PING : "ping",

    NEW_USER : "new_user",
    USER_LEFT : "user_left",

    CONNECTION_SUCCESS : "connection_success",
    CONNECTION_FAILURE : "connection_failure",
    SERVER_STOPPED : "server_stopped",

    INVITE : "invite",
    INVITE_DECLINED : "invite_declined",
    LOAD_GAME : "load_game"
}

function createMessage(type, data) {
    return JSON.stringify({
        type : type,
        data : data
    });
}

function sendCreatedMessage(connection, message) {
    connection.send(message);
}

// Use this primarily
function sendMessage(connection, type, data) {
    sendCreatedMessage(connection, createMessage(type, data));
}

// Check if on server
if (typeof exports !== 'undefined') {
	exports.ClientMessage = ClientMessage;
	exports.ServerMessage = ServerMessage;

    exports.createMessage = createMessage;
    exports.sendCreatedMessage = sendCreatedMessage;
    exports.sendMessage = sendMessage;
}